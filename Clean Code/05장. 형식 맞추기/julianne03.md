## 05. 형식 맞추기

### 들어가면서

- 프로그래머라면 형식을 깔끔하게 맞춰 코드를 짜야 한다.
- 코드 형식을 맞추기 위한 간단한 규칙을 정하고 그 규칙을 착실히 따라야 한다.
- 팀으로 일한다면 팀이 정한 규칙을 따라야 하며, 필요하다면 규칙을 자동으로 적용하는 도구를 활용한다.

<br>

### 형식을 맞추는 목적

- **코드 형식**은 중요하다!
- 코드가 바뀐다고 해도 맨 처음 잡아놓은 **구현 스타일, 가독성 수준**은 유지보수 용이성과 확장성에 계속 영향을 미친다.
- 오랜 시간이 지나 원래 코드가 사라질지라도 **개발자의 스타일과 규율**은 사라지지 않는다.
- 이번 장에서는 **원활한 소통을 장려하는 코드 형식**을 소개하겠다.

<br>

### 적절한 행 길이를 유지하라

- 500줄을 넘지 않고 대부분 200줄 정도인 파일로도 커다란 시스템을 구축할 수 있다.
- 일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다.

<br>

### 소스 파일을 신문 기사처럼 작성하라

1. 이름은 간단하면서도 설명이 가능하게
2. 이름만 보고도 올바른 모듈을 살펴보고 있는지 아닌지를 판단할 정도로 신경 써서 짓기
3. 소스 파일 첫 부분은 고차원 개념과 알고리즘을 설명
4. 아래로 내려갈수록 의도를 세세하게 묘사
5. 마지막에는 가장 저차원 함수와 세부 내역

<br>

### 개념은 빈 행으로 분리하라

- 각 행은 수식이나 절을 나타내고, 일련의 행 묶음은 완결된 생각 하나를 표현한다.
- **생각 사이에는 빈 행을 넣어 분리해야 마땅하다.**

  ````java
  public class BoldWidget extends ParentWidget {
  public BoldWidget(ParentWidget parent, String text) throws Exception {
  ...
  }

          public String render() throws Exception {

          }
      }
      ```
  ````

<br>

### 세로 밀집도

- 서로 밀집한 코드 행은 세로로 가까이 놓여야 한다.
- ex. 인스턴스 변수를 의미 없는 주석으로 떨어뜨려 놓는 예 - Bad 👎

<br>

### 수직 거리

- 같은 파일에 속할 정도로 밀접한 개념들은 세로 거리로 **연관성**을 표현한다.
- **연관성**이란❓ 한 개념을 이해하는 데 다른 개념이 중요한 정도
- **변수 선언**
  - 사용하는 위치에 최대한 가까이 사용한다.
- **인스턴스 변수 선언**
  - 클래스 맨 처음에 선언한다.
  - 잘 알려진 위치에 인스턴스 변수를 모아야 한다.
- **종속 함수**
  - 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다.
- **개념적 유사성**

  - 친화도가 높을수록 코드를 가까이 배치한다.
  - ex. 비슷한 동작을 수행하는 일군의 함수

  ```java
  pulbic class Assert {
      static public void assertTrue(String message, boolean condition) {
          ...
      }

      static public void assertTrue(boolean condition) {
          assertTrue(null, condition);
      }

      static public void assertFalse(String message, boolean condition) {
          assertTrue(message, !condition);
      }
  }
  ```

- **세로 순서**
  - 호출하는 함수를 호출되는 함수보다 먼저 배치한다.
  - 소스 코드 모듈이 고차원 -> 저차원

<br>

### 가로 형식 맞추기

- 120자 정도로 행 길이를 제한한다.
- 프로그래머는 명백히 짧은 행을 선호한다.
- **가로 공백과 밀집도**
  - 공백을 넣으면 한 개념이 아니라 별개로 보인다.
  - 공백 👍 : 함수를 호출하는 코드에서 괄호 안 인수
  - 공백 👎 : 함수 이름과 이어지는 괄호 사이
- **가로 정렬**
  - 코드가 엉뚱한 부분을 강조해 진짜 의도가 가려지기 때문에 Bad 👎
- **들여쓰기**
  - 범위(scope)로 이뤄진 계층을 표현하기 위해
  - ex. 클래스 내 메서드는 클래스보다 한 수준 들여쓴다.
  - 프로그래머는 들여쓰기 체계에 크게 의존한다.
- **들여쓰기 무시하기**
  - 때로는 간단한 `if`문, `while`문, 짧은 함수에서 들여쓰기 규칙을 무시하고픈 유혹이 생긴다.
  - 하지만 들여쓰기로 범위를 제대로 표현하자.
- **가짜 범위**
  - 빈 `while`문, `for`문을 피하지 못할 때는 빈 블록을 올바로 들여쓰고 괄호로 감싼다.

<br>

### 팀 규칙

- 팀에 속한다면 자신이 선호해야 할 규칙은 바로 팀 규칙이다.
- 팀은 한 가지 규칙에 합의해야 한다.
- ex. 들여쓰기를 몇 자로 할지, 클래스와 메서드 등의 이름을 어떻게 지을지
- 그래야 소프트웨어가 일관적인 스타일을 보인다.

<br>

### 느낀점

- 지금까지 팀 프로젝트를 해오면서 위에서 나온 팀 규칙을 정해놓고 시작해본 적은 없었다.
- 앞으로도 많은 팀 프로젝트를 하게 될텐데 이러한 글을 먼저 읽고 시작하는 것과 읽지 않고 시작하는 것에는 큰 차이가 있을 것 같다라는 생각이 들었다.
