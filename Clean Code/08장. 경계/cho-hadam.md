# 📒 08장. 경계

<br />

## 외부 코드 사용하기

Sensor라는 객체를 담는 Map을 생성한다
```java
Map sensors = new HashMap();
```

Sensor 객체가 필요한 코드는 다음과 같이 Sensor 객체를 가져온다
```java
Sensor s = (Sensor)sensors.get(sensorId);
```
위 코드는 깨끗한 코드라 보기 어렵고 의도도 분명히 드러나지 않는다

🔽

```java
public class Sensors {
  private Map sensors = new HashMap();

  public Sensor getById(String id) {
    return (Sensor)sensors.get(id);
  }

  // 이하 생략
}
```

위 코드처럼 경계 인터페이스인 Map을 Sensor 안으로 숨긴다   
1. Map 인터페이스가 변하더라도 나머지 프로그램에는 영향을 미치지 않는다
2. 프로그램에 필요한 인터페이스만 제공한다
3. 코드는 이해하기 쉽지만 오용하기는 어렵다
4. 설계 규칙과 비즈니스 규칙을 따르도록 강제할 수 있다

경계 인터페이스를 이용할 때는 이를 이용하는 클래스나 클래스 계열 밖으로 노출되지 않도록 주의한다

<br />

## 경계 살피고 익히기

외부 코드를 익히고 통합하기는 어렵다

### 학습 테스트

간단한 테스트 케이스를 작성해 외부 코드를 익히는 것

<br />

## 학습 테스트는 공짜 이상이다

어쨌든 API를 배워야 하므로 학습 테스트에 드는 비용은 없다   
오히려 필요한 지식만 확보하는 손쉬운 방법이다

<br />

## 아직 존재하지 않는 코드를 사용하기

원하는 인터페이스를 구현한다

**장점**
- 인터페이스를 전적으로 통제한다
- 코드 가독성이 높아진다
- 코드 의도가 분명해진다

<br />

## 결론

경계에 위치하는 코드는 깔끔히 분리한다   
통제가 불가능한 외부 패키지에 의존하는 대신 통제가 가능한 우리 코드에 의존하는 편이 훨씬 좋다

**방법**
- 새로운 클래스로 경계를 감싸거나
- ADAPTER 패턴을 사용해
- 원하는 인터페이스를 패키지가 제공하는 인터페이스로 변환한다

**장점**
* 코드 가독성이 높아진다
* 경계 인터페이스를 사용하는 일관성도 높아진다
* 외부 패키지가 변했을 때 변경할 코드도 줄어든다
