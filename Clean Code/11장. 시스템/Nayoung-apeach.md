# 11. 시스템🎨

### 시스템 제작과 시스템 사용을 분리하라

☑**제작은 사용과 아주 다르다는 사실을 명심한다.**

- 관심사 분리가 중요하다.
- 런타임 로직에서 특정 객체를 전형 사용하지 않더라도 의존성을 해결하지 않으면 컴파일이 안 된다.

☑**Main 분리**

- 시스템 생성과 시스템 사용을 분리하는 한 가지 방법으로, 생성과 관련한 코드는 모두 main이나 main이 호출하는 모듈로 옮기고, 나머지 시스템은 모든 객체가 생성되었고 모든 의존성이 연결되었다고 가정한다.

☑**팩토리**

- 객체가 생성되는 시점을 애플리케이션이 결정할 필요도 생긴다.
- 애플리케이션은 인스턴스가 생성되는 시점을 완벽하게 통제하며, 필요하다면 애플리케이션에서만 사용하는 생성자 인수도 넘길 수 있다.

☑**의존성 주입**

- 사용과 제작을 분리하는 강력한 메커니즘 하나다.
- 제어 역전 기법을 의존성 관리에 적용한 메커니즘이다.

### 확장

☑**횡단 관심사**

- 영속성과 같은 관심사는 애플리케이션의 자연스러운 객체 경계를 넘나드는 경향이 있다.
- 영속성 프레임워크 또한 모듈화할 수 있다.
- 도메인 논리도 모듈화 할 수 있다.

### 자바 프록시

- 단순한 상황에 적합하다.
- 개별 객체나 클래스에서 메서드 호출을 감싸는 경우가 좋은 예다.
- 자바 프록시를 사용하려면 GGLIB, ASM, Javassist등과 같은 바이트 코드 처리 라이브러리가 필요하다.

### 의사 결정을 최적화하라

☑**모듈을 나누고 관심사를 분리하면 지엽적인 관리와 결정이 가능해진다.**

- 가장 적합한 사람에게 책임을 맡기면 가장 좋다.
- 가능한 마지막 순간까지 결정을 미루는 방법이 최선일 수도 있다.

### 명백한 가치가 있을 때 표준을 현명하게 사용하라

- 아이디어와 컴포넌트를 재사용하기 쉽다.
- 적절한 경험을 가진 사람을 구하기 쉽다.
- 좋은 아이디어를 캡슐화하기 쉽다.
- 컴포넌트를 엮기 쉽다.

- 하지만 만드는 시간이 너무 오래 걸린다.

### 시스템은 도메인 특화 언어가 필요하다.

☑**소프트웨어 분야에서도 DSL이 새롭게 조명 받기 시작했다.**

- DSL : 간단한 스크립트 언어나 표준 언어로 구현한 API를 가리킨다.
- 좋은 DSL은 도메인 개념과 그 개념을 구현한 코드 사이에 존재하는 '의사소통 간극' 을 줄여준다.

### 결론

시스템 역시 깨끗해야 한다.

깨끗하진 못한 아키텍처는 도메인 논리를 흐리며 기민성을 떨어뜨린다.

시스템을 설계하든 개별 모듈을 설계하든, 실제로 돌아가는 가장 단순한 수단을 사용해야 한다는 사실을 명심하자.

### 기억에 남는 구절 📖

> 동일한 정보를 저장하는 자료 유형이 두 개라는 의미다.
