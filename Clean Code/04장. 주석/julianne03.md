## 04. 주석

### 들어가면서

- **나쁜 코드에 주석을 달지 마라. 새로 짜라**
- 경솔하고 근거 없는 주석은 코드를 이해하기 어렵게 만든다.
- 코드로 의도를 표현하지 못해, 실패를 만회하기 위해 주석을 사용한다.
- 잘 달린 주석은 그 어떤 정보보다 유용하다.

**진실은 한 곳에만 존재한다. 바로 코드다.**  
**주석을 가능한 줄이도록 노력해야 한다.**

---

### 주석은 나쁜 코드를 보완하지 못한다

- 주석을 단다는 뜻은 코드의 품질이 나쁘다는 것이다.
- Good
  - 표현력이 풍부하고 깔끔하며 주석이 거의 없는 코드 Good
- Bad
  - 복잡하고 어수선하며 주석이 많이 달린 코드 Bad

### 코드로 의도를 표현하라!

```java
// Bad
if ((employee.flags & HOURLY_FLAG) && (employee.age > 65))
// Good - 코드로 의도를 표현한 예제
if (employee.isEligibleForFullBenefits)
```

---

### 좋은 주석

- 어떤 주석은 필요하거나 유익하다.
- But, 정말로 좋은 주석은 주석을 달지 않을 방법을 찾아낸 주석

1. **법적인 주석**
   ```
   Copyright (C) 2003,2004,2005 by Object Mentor, Inc. All rights reserved.
   GNU General Public License 버전 2 이상을 따르는 조건으로 배포한다.
   ```
2. **정보를 제공하는 주석**
   ```java
   // 코드에서 사용한 정규표현식이 시각과 날짜를 뜻한다고 설명한다.
   // 시각과 날짜를 변환하는 클래스를 만들어 코드를 옮기면 -> 주석이 필요 없어진다.
   // kk:mm:ss EEE, MMM dd, yyyy 형식이다.
   Pattern timeMatcher = Pattern.compile(
       "\\d*:\\d*:\\d* \\w*, \\w* \\d*, \\d*");
   )
   ```
3. **의도를 설명하는 주석**
4. **의미를 명료하게 밝히는 주석**
   - 때때로 모호한 인수나 반환값은 그 의미를 읽기 좋게 표현하면 이해하기 쉬워진다.
   - 하지만 주석이 올바른지 검증하기 쉽지 않다.
5. **결과를 경고하는 주석**
   - 다른 프로그래머들에게 결과를 경고할 목적으로 주석을 사용한다.
   ```java
   public static SimpleDateFormat makeStandardHttpDateFormat() {
       // SimpleDateFormat은 스레드에 안전하지 못하다.
       // 따라서 각 인스턴스를 독립적으로 생성해야 한다.
       SimpleDateFormat df = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");
       df.setTimeZone(TimeZone.getTimeZone("GMT"));
       return df;
   }
   ```
6. **TODO 주석**

   - 때로는 '앞으로 할 일'을 `// TODO` 주석으로 남겨두면 편하다.
   - ex. 더 이상 필요 없는 기능을 삭제하라는 알림, 누군가에게 문제를 봐달라는 요청, 더 좋은 이름을 떠올려달라는 부탁 등등
   - 주기적으로 TODO 주석을 점검해 없애도 괜찮은 주석은 없애라

7. **중요성을 강조하는 주석**

   - 자칫 대수롭지 않다고 여겨질 뭔가의 중요성을 강조하기 위해서도 주석을 사용한다.

8. **공개 API에서 Javadocs**

---

### 나쁜 주석

- 대다수 주석이 이 범주에 속한다.

1. **주절거리는 주석**
   - 특별한 이유 없이 의무감으로 혹은 프로세스에서 하라고 하니까 마지못해 주석을 단다면 전적으로 시간낭비다.
2. **같은 이야기를 중복하는 주석**
   - 주석이 같은 코드 내용을 그대로 중복한다면 코드보다 주석을 읽는 시간이 더 오래 걸릴 수도 있다.
3. **오해할 여지가 있는 주석**
   - 때때로 의도는 좋았으나 프로그래머가 딱 맞을 정도로 엄밀하게는 주석을 달지 못하기도 한다.
4. **의무적으로 다는 주석**
   - 오히려 코드만 헷갈리게 만들며, 거짓말할 가능성을 높이며, 잘못된 정보를 제공할 여지만 만든다.
5. **이력을 기록하는 주석**
   - 예전과 달리 소스 코드 관리 시스템이 생기면서 이제는 혼란만 가중할 뿐
6. **있으나 마나 한 주석**
   - 너무 당연한 사실을 언급하며, 새로운 정보를 제공하지 못하는 주석
   - 개발자가 주석을 무시하는 습관에 빠진다.
   ```java
   // ex
   /**
   * 기본 생성자
   */
   protected AnnualDateRule() {
   }
   ```
7. **무서운 잡음**
   - 목적이 없는 Javadocs는 필요가 없다.
8. **함수나 변수로 표현할 수 있다면 주석을 달지 마라**
9. **위치를 표현하는 주석**
   - 반드시 필요한 경우에만
   ```java
   // Actions ////////////////
   ```
10. **닫는 괄호에 다는 주석**
    ```java
    try {
        ...
        while ((line = in.readLine()) != null) {
            ...
        } // while
    } // try
    ```
11. **공로를 돌리거나 저자를 표시하는 주석**
    - 소스 코드 관리 시스템으로 해결 가능
    ```java
    // ex
    /* 릭이 추가함 */
    ```
12. **주석으로 처리한 코드**
    - 다른 사람들이 지우기를 주저한다.
    ```java
    // InputStream resultStream = formatter.getResultStream();
    ```
13. **HTML 주석**
    ```java
    /**
    * <p />
    **/
    ```
14. **전역 정보**
    - 코드 일부에 주석을 달면서 시스템의 전반적인 정보를 기술하지 마라.
15. **너무 많은 정보**
    - 주석에다 흥비로운 역사나 관련 없는 정보를 장황하게 늘어놓지 마라.
16. **모호한 관계**
    - 주석과 주석이 설명하는 코드는 둘 사이 관계가 명백해야 한다.
17. **함수 헤더**
    - 짧고 한 가지만 수행하며 이름을 잘 붙인 함수가 주석으로 헤더를 추가한 함수보다 훨씬 좋다.
18. **비공개 코드에서 Javadocs**
    - 유용하지 않을 뿐더러 Javadocs 주석이 요구하는 형식으로 인해 코드만 보기 싫고 산만해질 뿐이다.

---

### 느낀점

- 난 보통 주석을 달지 않는 편이기는 하지만 협업을 하면서 다른 사람이 보기에 쉽도록 설명을 달아야하는지 궁금증을 가지고 있었다.
- 주석을 다는 것보다 이름을 잘 짓고 누가 보더라도 이해하기 쉽게 명백하게 코드를 짜는 것이 훨씬 중요하다는 것을 깨닫게 되었다.
