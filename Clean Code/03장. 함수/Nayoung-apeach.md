# 3.함수♻

### 작게 만들어라!

☑**함수의 첫째 규칙은 작게 두 번째 규칙은 더 작게**

- if문/else문/while문 등에 들어가는 블록은 한 줄이어야 한다는 의미이다.
- 들여쓰기 수준은 1단이나 2단을 넘어서면 안 된다.

### 한 가지만 해라!

☑**함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지 만을 해야 한다.**

- 의미 있는 이름으로 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 셈이다.
- 지정된 함수 이름 아래에서 추상화 수준이 하나인 단계만 수행한다면 그 함수는 한 가지 작업만 한다.

### 함수 당 추상화 수준은 하나로!

☑**함수가 '한 가지' 작업만 하려면 함수 내 모든 문장의 추상화 수준이 동일해야 한다.**

- 한 함수 내에 추상화 수준을 섞으면 코드를 읽는 사람이 헷갈린다.
- 특정 표현이 근본 개념인지 아니면 세부 사항인지 구분하기 어려워진다.

☑**내려가기 규칙**

- 위에서 아래로 이야기처럼 읽혀야 좋다.
- 함수 추상화 수준이 한 번에 한 단계씩 낮아진다.

### Switch 문

- switch 문은 작게 만들기 어렵다.
- 한 가지 작업만 하는 switch 문도 만들기 어렵다.
- 각 switch문을 저차원 클래스에 숨기고 절대로 반복하지 않는 방법을 사용해야 한다.

### 서술적인 이름을 사용하라!

☑**함수가 하는 일을 좀 더 잘 표현하는 이름을 지어야 한다.**

- 서술 적인 이름이 짧고 어려운 이름보다 좋다.
- 여러 단어를 사용해 함수 기능을 잘 표현하는 이름을 선택한다.
- 일관성이 있어야 한다.

### 함수 인수

☑**함수에서 이상적인 인수 개수는 0개(무항)다.** 

- 많이 쓰는 단항 형식
    1. 인수에 질문을 던지는 경우
    2. 인수를 뭔가로 변환해 결과를 반환하는 경우
- 플래그 인수
    1. 플래그 인수는 추하다.
    2. 그다지 큰 도움은 안 된다.
- 이항 함수
    1. 인수가 2개인 함수는 인수가 1개인 함수보다 이해하기 어렵다. 
    2. 한 값을 표현하거나 자연적인 순서가 있다면 좋다.
- 삼항 함수
    1. 순서, 주춤, 무시로 야기되는 문제가 두 배 이상 늘어난다.

### 부수 효과를 일으키지 마라!

☑**부수 효과는 거짓말이다.**

- 함수에서 한 가지를 하겠다고 약속한 후 남몰래 다른 것도 한다.
- 부수 효과는 시간적인 결합을 초래한다.

### 명령과 조회를 분리하라!

☑**뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야 한다.**

- 객체 상태를 변경한다.
- 객체 정보를 반환한다.

### 오류 코드보다 예외를 사용하라!

☑**명령 함수에서 오류 코드를 반환하는 방식은 명령/조회 분리 규칙을 미묘하게 위반한다.**

- 오류코드 대신 예외를 사용하면 원래 코드에서 분리되어 코드가 깔끔해진다.
- 재컴파일/재배치 없이도 새 예외 클래스를 추가 할 수 있다.

### 반복하지 마라!

☑**중복은 소프트웨어에서 모든 악의 근원이다.**

- 코드가 늘어난다.
- 객체 지향 프로그래밍은 코드를 부모 클래스로 몰아 중복을 없앤다.

### 구조적 프로그래밍

☑**함수가 아주 클 때만 상당한 이익을 제공한다.**

- 함수는 return문이 하나여야 한다.
- 루프 안에서 break나 continue를 사용해선 안 되며 goto는 절대 사용하면 안 된다.

### 함수를 어떻게 짜죠?

☑**소프트웨어를 짜는 행위는 여느 글짓기와 비슷하다.**

- 코드를 테스트하는 단위 테스트 케이스를 만든다.
- 코드를 다듬고, 함수를 만들고, 이름을 바꾸고, 중복을 제거한다.
- 전체 클래스를 쪼갠다.

### 결론

- 모든 시스템은 특정 응용 분야 시스템을 기술할 목적으로 프로그래머가 설계한 도메인 특화 언어(DSL; Domain Specific Language)로 만들어진다.
- 프로그래밍 언어라는 수단을 사용해 좀 더 풍부하고 좀 더 표현력이 강한 언어를 사용해 자신만의 이야기를 풀어간다.

- 기억에 남는 구절 📖

> 프로그래머는 시스템을 프로그램이 아니라 풀어갈 이야기로 여긴다.
