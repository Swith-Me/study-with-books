## 01. 타입


### 1.0 서론

자바스크립트 같은 **동적 언어**는 타입 개념이 없다고 생각하는 개발자가 많다.
```
// ex. animal의 타입은 지정해주지 않아도 String 타입으로 결정된다.
const animal = "tiger";
```
ES5에서는 다음과 같이 명세되어 있다.
```
타입은 ECMAScript 언어 타입과 명세 타입으로 하위 분류된다.
ECMAScript 언어 타입에는 Undefined, Null, Boolean, String, Number, Object가 있다.
```
**'타입'이란 자바스크립트 엔진, 개발자 모두에게 어떤 값을 다른 값과 분별할 수 있는, 고유한 내부 특성의 집합이다.**

</br>

### 1.1 타입, 그 실체를 이해하자
타입별로 내재된 특성을 제대로 알고 있어야 값을 다른 타입으로 변환하는 방법을 정확히 이해할 수 있다.<br>
**어떤 형태로든 거의 모든 자바스크립트 프로그램에서 강제변환이 일어나므로 타입을 확실하게 인지하고 사용하는 것이 중요하다.**
```
- ex. 숫자 42에서 2라는 문자를 추출하려면 숫자 42 -> 문자열 "42"로 변경해야 한다.
```

<br />

### 1.2 내장 타입
자바스크립트에는 다음 7가지 내장 타입이 있다.
```
object를 제외한 이들을 원시 타입이라 한다.
- null
- undefined
- boolean
- number
- string
- object
- symbol
```
값 타입은 `typeof` 연산자로 알 수 있다.<br>
하지만 목록의 7가지 내장 타입과 1:1로 정확히 매치되지는 않는다.
```
> typeof null // 'object' (null을 반환하는게 정답)
```
위 사례는 거의 20년 동안 고쳐지지 않는 **버그**로 앞으로도 해결될 가능성은 좀처럼 없어 보인다.<br>
그래서 타입으로 `null` 값을 정확히 확인하려면 조건이 하나 더 필요하다.
```
const a = null;
(!a && typeof a === "object"); // true
```
`null`은 `falsy`(false나 다름없는) 유일한 원시 값이지만 타입은 "object"인 특별한 존재다.<br>
`typeof`가 반환하는 문자열은 하나 더 있다.
```
typeof function a(){}; // 'function'
```
`typeof` 반환 값을 보면 마치 `function`이 최상위 레벨의 내장 타입처럼 보이지만 실제로는 **object의 '하위 타입'(호출 가능한 객체)** 이다.<br>
함수가 호출 가능한 **객체**이기에 함수에 프로퍼티를 둘 수 있다.
```
function a(b, c){};
a.length; // 2 (함수에 선언된 인자 개수를 알 수 있다.)
```
**배열도 그냥 객체다.** <br>
배열은 숫자 인덱스를 가지며, `length` 프로퍼티가 자동으로 관리되는 등의 추가 특성을 지닌, **객체의 '하위 타입'** 이라 할 수 있다.
```
typeof [1, 2, 3]; // 'object'
```

<br>

### 1.3 값은 타입을 가진다.
**값에는 타입이 있지만, 변수엔 따로 타입이란 없다.**<br>
변수는 언제라도, 어떤 형태의 값이라도 가질 수 있다.<br>
```
// 자바스크립트는 '타입 강제'를 하지 않는다.
// typeof 연산자의 반환 값은 언제나 문자열이다.
const a = 42;
typeof a; // "number"
```

#### 1.3.1 값이 없는 VS 선언되지 않은
값이 없는 변수의 값은 `undefined`이며, typeof 결과는 `"undefined"`다.<br>
`"undefined"`(값이 없는)와 `"undeclared"`(선언되지 않은)를 동의어처럼 생각하기 쉬운데, 자바스크립트에서 **둘은 완전히 다른 개념이다.**
```
var a;
console.log(a); // undefined
console.log(b); // ReferenceError: b is not defined (undeclared)
typeof a; // 'undefined'
typeof b; // 'undefined' (b는 선언하지도 않았는데 브라우저는 오류 처리를 하지 않는다. -> typeof만의 안전 가드)
```

#### 1.3.2 선언되지 않은 변수
브라우저에서 자바스크립트 코드를 처리할 때, 특히 여러 스크립트 파일의 변수들이 전역 네임스페이스를 공유할 때, `typeof`의 안전 가드는 의외로 쓸모가 있다.<br>
전역 변수 `DEBUG`를 지정했다고 가정했을 때, 만약 `typeof`의 안전 가드가 없었더라면 모든 파일에서 `ReferenceError`가 났을 것이다.
```
// 에러 발생
if (DEBUG) { ... }

// 이렇게 해야 안전하게 존재 여부를 체크할 수 있다.
if (typeof DEBUG !== "undefined") { }
```
**TIP. 명시적으로 `var`를 빼야 선언문이 호이스팅되지 않는다.**<br>
선언되지 않은 변수 때와는 달리 어떤 객체의 프로퍼티를 접근할 때 그 프로퍼티가 존재하지 않아도 에러가 나지는 않는다.

<br>

### 1.4 정리하기
1. 자바스크립트에는 7가지 내장 타입이 있으며, `typeof` 연산자로 타입명을 알아낸다.
2. 변수는 타입이 없지만 값은 타입이 있고, 타입은 값의 내재된 특성을 정의한다.
3. `"undefined"`와 `"undeclared"`는 자바스크립트 안에서는 완전히 다른 개념이다.
4. 위의 두 용어를 대충 섞어버려, 에러 메시지 뿐만 아니라 `typeof` 반환 값도 모두 `"undefined"`로 뭉뚱그린다.
5. 그래도 `typeof` 안전가드 덕분에 선언되지 않은 변수에 사용하면 제법 쓸 만하다.
