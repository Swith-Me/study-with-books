
# 08. 통합점: 게이트웨이, 터널, 릴레이

- 게이트웨이 : 서로 다른 프로토콜과 애플리케이션 간의 HTTP 인터페이스다.
- 애플리케이션 인터페이스 : 서로 다른 형식의 웹 애플리케이션이 통신하는  데 사용한다.
- 터널 : HTTP 커넥션을 통해서 HTTP가 아닌 트래픽을 전송하는 데 사용한다.
- 릴레이 : 일종의 단순한 HTTP 프락시로, 한 번에 한 개의 홉에 데이터를 전달하는 데 사용한다.

### **8.1 게이트웨이**

**📝HTTP의 확장과 인터페이스는 사람들의 필요에 따라 발전해왔다.** 

- 게이트웨이는 요청을 받고 응답을 보내는 포털 같이 동작하는데, 동적인 콘텐츠를 생성하거나 데이터 베이스에 질의를 보낼 수 있다.
- 게이트웨이는 HTTP 트래픽을 다른 프로토콜로 자동으로 변환하여, HTTP 클라이언트가 다른 프로토콜을 알 필요 없이 서버에 접속할 수 있게 하기도 한다.

**📝클라이언트 측 게이트웨이와 서버 측 게이트웨이**

- 웹 게이트웨이는 한쪽에서는 HTTP로 통신하고 다른 한쪽에서는 HTTP가 아닌 다른 프로토콜로 통신한다.
- 클라이언트 측 프로토콜과 서버 측 프로토콜을 빗금(/)으로 구분해 기술한다.

(ex) <클라이언트 프로토콜> / <서버 프로토콜>

- 서버 측 게이트웨이는 클라이언트와 HTTP로 통신하고, 서버와는 외래 프로토콜로 통신한다.
- 클라이언트 측 게이트웨이는 클라이언트와 외래 프로토콜로 통신하고, 서버와는 HTTP로 통신한다.
- 클라이언트 측 게이트웨이는 클라이언트와 외래 프로토콜로 통신하고, 서버와는 HTTP로 통신한다.

**📝프로토콜 게이트웨이**

- 프락시에 트래픽을 바로 보내는 것과 같이 게이트웨이에도 http 트래픽을 바로 보낼 수 있다.

**게이트웨이가 하는 일** 

- USER와 PASS 명령을 보내서 서버에 로그인한다.
- 서버에서 적절한 디렉터리로 변경하기 위해 CWD 명령을 내린다.
- 다운로드 형식을 ASCII로 설정한다.
- MDTM 으로 문서의 최근 수정 시간을 가져온다.
- PASV로 서버에게 수동형 데이터 검색을 하겠다고 말한다.
- RETR로 객체를 검색한다.
- 제어 채널에서 반환된 포트로 FTP 서버에 데이터 커넥션을 맺는다. 데이터 채널이 열리는 대로, 객체가 게이트웨이로 전송된다.

**게이트웨이는 객체를 받는 대로 HTTP 응답에 실어서 클라이언트에 전송할 것이다.**

### 8.3 리소스 게이트웨이

- 클라이언트 A의 요청을 받으면, 그 요청의 URI를 따라서 API를 통해 디지털 카메라 애플리케이션에 요청이 전송된다.
- 클라이언트 B의 URI는 전자상거래 소프트웨어로 전송되고, 결과는 브라우저로 전송된다.

### 8.5 터널

**📝CONNECT 요청**

CONNECT 문법은 시작줄을 제외하고는 다른 HTTP 메서드와 같다. 요청 URI는 호스트 명이 대신하며 클론에 이어 포트를 기술한다. 호스트와 포트는 다음과 같이 기술해야 한다. 

CONNECT [hone.netscape.com:443](http://hone.netscape.com:443) HTTP/1.0 

USER-agent:Mozilla/4.0 

**📝CONNECT 응답**

클라이언트는 요청을 전송한 다음, 게이트웨이의 응답을 기다린다. 일반 HTTP 메시지와 같이 200 응답 코드는 성공을 뜻한다. 편의상 응답에 있는 사유 구절은 'Connection Established' 로 기술된다.
