# [01장] HTTP 개관

<br />

## HTTP: 인터넷의 멀티미디어 배달부

HTTP는 웹 서버로부터 대량의 정보를 웹브라우저로 옮겨준다.

<br />

## 웹 클라이언트와 서버

웹 서버는 인터넷의 데이터를 저장하고, HTTP 클라이언트가 요청한 데이터를 제공한다.   
클라이언트는 서버에게 HTTP 요청을 보낸다.

<br />

## 리소스

웹 리소스란 웹에 콘텐츠를 제공하는 모든 것을 말하며, 웹 서버가 관리하고 제공한다.

- 정적 파일   
  * 텍스트 파일
  * HTML 파일
  * 마이크로소프트 워드 파일
  * 어도비 아크로뱃 파일
  * JPEG 이미지 파일
  * AVI 동영상 파일 등

- 동적 콘텐츠 리소스   
  * 사용자가 누구인지
  * 어떤 정보를 요청했는지
  * 몇 시인지에 따라 다른 콘텐츠 생성
  * 카메라에서 라이브 영상 가져와 보여줌
  * 주식 거래
  * 부동산 데이터베이스 검색
  * 온라인 쇼핑몰 선물 구입 등

### 미디어 타입

HTTP는 웹에서 전송되는 객체 각각에 MIME 타입이라는 데이터 포맷 라벨을 붙인다.

#### MIME 타입   

주 타입`primary object type`/부 타입`specific subtype`

- text/html   
HTML로 작성된 텍스트 문서
- text/plain   
plain ASCII 텍스트 문서
- image/jpeg   
JPEG 이미지
- image/gif   
GIF 이미지
- video/quicktime   
애플 퀵타입 동영상
- application/vnd.ms-powerpoint   
마이크로소프트 파워포인트 프레젠테이션

### URI

서버 리소스 이름은 `URI(uniform resource identifier, 통합 자원 식별자)`로 불린다.   
URI는 인터넷의 우편물 주소 같은 것으로, 정보 리소스를 고유하게 식별하고 위치를 지정할 수 있다.

#### URL

`URL(uniform resource locator, 통합 자원 지시자)`는 특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다.

> http://www.oreilly.com/index.html

- 첫 번째 부분은 스킴`scheme`으로, 사용되는 프로토콜을 서술한다
- 두 번째 부분은 서버의 인터넷 주소를 제공한다
- 마지막은 웹 서버의 리소스를 가리킨다

오늘날 대부분의 URI는 URL이다.

#### URN

`URN(uniform resource name, 유니폼 리소스 이름)`은 콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할을 한다.

> urn:ietf:rfc:2141

<br />

## 트랜잭션

HTTP 트랜잭션은 요청과 응답 메시지로 구성되어 있다.

### 메서드

HTTP 요청 메시지는 한 개의 메서드를 갖는다.   
메서드는 서버에게 어떤 동작이 취해져야 하는지 말해준다.

|HTTP 메서드|설명|
|----------|---|
|GET|서버에서 클라이언트로 지정한 리소스를 보내라.|
|PUT|클라이언트에서 서버로 보낸 데이터를 저장한 이름의 리소스로 저장하라.|
|DELETE|지정한 리소스를 서버에서 삭제하라.|
|POST|클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라.|
|HEAD|지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라.|

<span style="color: grey; font-size: 12px;">흔히 쓰이는 HTTP 메서드들</span>

### 상태 코드

HTTP 응답 메시지는 상태 코드와 함께 반환된다.   
상태 코드는 클라이언트에게 요청이 성공했는지 아니면 추가 조치가 필요한지 알려주는 세 자리 숫자다.

|HTTP 상태 코드|설명|
|----------|---|
|200|좋다. 문서가 바르게 반환되었다.|
|302|다시 보내라. 다른 곳에 가서 리소스를 가져가라.|
|404|없음. 리소스를 찾을 수 없다.|

<span style="color: grey; font-size: 12px;">흔히 쓰이는 HTTP 상태 코드 몇 가지</span>

### 웹페이지는 여러 객체로 이루어질 수 있다

애플리케이션은 보통 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행한다.

<br />

## 메시지

HTTP 메시지는 단순한 줄 단위의 문자열이다.   
이진 형식이 아닌 일반 텍스트이다.

HTTP 요청과 응답 메시지의 형식은 굉장히 비슷하다.

1. 시작줄   
    - 요청   
    무엇을 해야 하는지
    - 응답   
    무슨 일이 일어났는지
    
2. 헤더   
    헤더 필드는 쌍점`:`으로 구분된 하나의 이름과 하나의 값으로 구성된다   
    헤더는 빈 줄로 끝난다

3. 본문   
    어떤 종류의 데이터든 들어갈 수 있는 메시지 본문이 필요에 따라 올 수 있다.
    - 요청   
    웹 서버로 보낼 데이터
    - 응답   
    클라이언트로 데이터 반환

<br />

## TCP 커넥션

### TCP/IP

HTTP는 애플리케이션 계층 프로토콜이다.

TCP는 다음을 제공한다.
- 오류 없는 데이터 전송
- 순서에 맞는 전달   
(데이터는 언제나 보낸 순서대로 도착한다)
- 조각나지 않는 데이터 스트림   
(언제든 어떤 크기로든 보낼 수 있다)

### 접속, IP 주소 그리고 포트번호

TCP에서는 서버 컴퓨터에 대한 IP 주소와 그 서버에서 실행 중인 프로그램이 사용 중인 포트번호가 필요하다.

HTTP 서버의 IP 주소와 포트번호를 URL을 이용해 알아낼 수 있다.

HTTP를 이용해 서버의 리소스를 사용자에게 어떻게 보여주는 순서이다.
1. 웹브라우저는 서버의 URL에서 호스트 명을 추출한다.
2. 웹브라우저는 서버의 호스트 명을 IP로 변환한다.
3. 웹브라우저는 URL에서 포트번호(있다면)를 추출한다.
4. 웹브라우저는 웹 서버와 TCP 커넥션을 맺는다.
5. 웹브라우저는 서버에 HTTP 요청을 보낸다.
6. 서버는 웹브라우저에 HTTP 응답을 돌려준다.
7. 커넥션이 닫히면, 웹브라우저는 문서를 보여준다.

<br />

## 프로토콜 버전

### HTTP/0.9

- 1991년의 HTTP 프로토타입
- 심각한 디자인 결함 다수
- 구식 클라이언트하고만 사용 가능
- GET 메서드만 지원
- MIME 타입, HTTP 헤더, 버전 번호 지원하지 않음

### HTTP/1.0

- 널리 쓰이기 시작한 HTTP 버전
- 버전 번호, HTTP 헤더, 추가 메서드, 멀티미디어 객체 처리 추가

### HTTP/1.0+

- 확장된 HTTP 버전
- keep-alive 커넥션
- 가상 호스팅
- 프락시 연결 등

### HTTP/1.1

- HTTP 설계의 구조적 결함 교정
- 두드러진 성능 최적화
- 잘못된 기능 제거
- 더 복잡해진 웹 애플리케이션과 배포 지원

### HTTP/2.0

<br />

## 웹의 구성요소

- 프락시   
클라이언트와 서버 사이에 위치한 HTTP 중개자

- 캐시   
많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고

- 게이트웨이   
다른 애플리케이션과 연결된 특별한 웹 서버

- 터널   
단순히 HTTP 통신을 전달하기만 하는 특별한 프락시

- 에이전트   
자동화된 HTTP 요청을 만드는 준지능적`semi-intelligent` 웹클라이언트
