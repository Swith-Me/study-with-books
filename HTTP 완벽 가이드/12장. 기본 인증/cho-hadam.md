# [12장] 기본 인증

HTTP는 자체적인 인증 관련 기능을 제공한다.

보안을 더 강화한 요즘 웹 사이트들 대부분은 HTTP 자체 인증 기능보다는 각각의 인증 모듈을 이용해 직접 구현한다.

<br />

## 인증

### HTTP의 인증요구/응답 프레임워크

HTTP는 사용자 인증을 하는 데 사용하는 자체 인증요구/응답 프레임워크를 제공한다.

### 인증 프로토콜과 헤더

HTTP에는 기본 인증과 다이제스트 인증이 있다.

현대에 HTTP의 인증요구/응답 프로토콜을 사용하는 인증 프로토콜로는 OAuth가 있다.   
OAuth는 모바일 기기 같은 다양한 애플리케이션에서 API 인증을 위해 사용하는 최신 인증 프로토콜이다.

| 단계 | 헤더 | 기타 |
| --- | ---------------- | ------ |
| 요청 | | |
| 인증 요구 | WWW-Authenticate | WWW-Authenticate: Basic<br/>realm="정보"     realm은 요청 받은 무서 집합의 이름을 따옴표로 감싼 것으로, 사용자는 이 정보를 보고 어떤 비밀번호를 사용해야 하는지 알 수 있다. |
| 인증 | Authorization | Authorization: Basic *base-64로 인코딩한 사용자 이름과 비밀번호* |
| 성공 | Authentication-Info | 기본 인증 프로토콜은 사용하지 않음 |

<br />

## 기본 인증

### Base-64 사용자 이름/비밀번호 인코딩

HTTP 기본 인증은 사용자 이름과 비밀번호를 콜론으로 이어서 합치고, base-64 인코딩 메서드를 사용해 인코딩 한다.

base-64 인코딩은 8비트 바이트로 이루어져 있는 시퀀스를 6비트 덩어리의 시퀀스로 변환한다.   
바이너리, 텍스트, 국제 문자 데이터 문자열을 받아서 전송 가능 문자인 알파벳으로 변환하기 위해 발명됐다.

### 프락시 인증

| 웹 서버 | 프락시 서버 |
| ------ | --------- |
| 비인증 상태 코드: 401 | 비인증 상태 코드: 407 |
| WWW-Authenticate | Proxy-Authenticate |
| Authorization | Proxy-Authorization |
| Authentication-Info | Proxy-Authentication-Info |

<br />

## 기본 인증의 보안 결함

- base-64로 인코딩된 비밀번호는 사실상 '비밀번호 그대로' 보내는 것과 다름없다.
- 보안 비밀번호가 디코딩하기에 더 복잡한 방식으로 인코딩되어 있다고 하더라도, 그대로 원 서버에 보내서 인증에 성공하고 서버에 접근할 수 있다.
- 정상적인 동작을 보장하지 않는다.
- 가짜 서버의 위장에 취약하다.
