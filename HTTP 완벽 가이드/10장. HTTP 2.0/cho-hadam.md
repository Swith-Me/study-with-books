# [10장] HTTP/2.0

## HTTP/2.0의 등장 배경

HTTP/1.1은 단순하지만 성능이 좋지 못했음.   
회전 지연을 줄이기 위해 구글의 SPDY를 기반으로 HTTP/2.0 초안을 만들기 시작함.

<br/>

## 개요

HTTP/2.0은 서버와 클라이언트 사이의 TCP 커넥션 위에서 동작한다.

<br/>

## HTTP/1.1과의 차이점

### 프레임

HTTP/2.0에서 모든 메시지는 프레임에 담겨 전송된다.

### 스트림과 멀티플렉싱

한 쌍의 HTTP 요청과 응답은 하나의 스트림을 통해 이루어진다.   
HTTP/1.1에서는 응답이 도착하고 나서야 다시 요청을 보낼 수 있어 회전 지연을 줄이기 위해 여러 개의 TCP 커넥션을 만들었다.   
하지만 무한정 만들 수는 없기 때문에 회전 지연을 피하기 어렵다.

HTTP/2.0에서는 하나의 커넥션에 여러 개의 스트림이 동시에 열릴 수 있다.
스트림은 우선순위도 가질 수 있다. (보장은 안 됨)

### 헤더 압축

HTTP/2.0에서는 헤더를 압축하여 전송한다.   
HPACK 명세에 정의된 헤더 압축 방법으로 압축된 뒤, 헤더 블록 조각들로 쪼개져서 전송된다.   
(SPDY 프로토콜에서는 deflate 알고리즘으로 압축했으나 보안 취약점이 있었음)

### 서버 푸시

HTTP/2.0은 서버가 하나의 요청에 대해 응답으로 여러 개의 리소스를 보낼 수 있음.

> HTML 문서를 요청 받은 서버는 그 HTML 문서가 링크하고 있는 이미지, CSS 파일, 자바스크립트 파일 등의 리소스를 푸시할 수 있다.

<br />

## 알려진 보안 이슈

### 중개자 캡슐화 공격

HTTP/2.0을 HTTP/1.1로 변환할 때 의미가 변질될 수 있음.

### 긴 커넥션 유지로 인한 개인정보 누출 우려

> 이 전에 브라우저를 사용했던 사용자가 무엇을 했는지 알아내는 등
