# 02. URL과 리소스

## 2.0 Intro

- 어떤 것을 분류하기 위해선 표준화된 이름을 가지고 있어야 한다. (ex. 책의 ISBN 번호)
- **URL**은 인터넷의 리소스를 가리키는 표준이름이다.
- **URL**은 전자정보 일부를 가리키고 그것이 어디에 있고 어떻게 접근할 수 있는지 알려준다.

<br>

## 2.1 인터넷의 리소스 탐색하기

**URL이 하는 일**

- 브라우저가 정보를 찾는데 필요한 리소스의 위치를 가리킨다.
- 사람이 HTTP 및 다른 프로토콜을 통해 접근할 수 있다.
- 사용자는 브라우저에 URL을 입력하고,
- 브라우저는 화면 뒤에서 리소스를 얻기 위해 적절한 프로토콜을 사용해 메시지를 전송한다.
- 리소스가 어디 있는지 설명해서 리소스를 식별한다.

**URL 자세히 들여다 보기**

> <img width="640" alt="url description" src="https://user-images.githubusercontent.com/59498977/129055084-8c48a9db-2e1d-4b4c-89b6-6584a7a50ae1.png">

1. **스킴(How)**

   - URL의 첫 부분인 `https` 는 URL의 스킴이다.
   - 웹 클라이언트가 리소스에 어떻게 접근하는지 알려준다.
   - 이 경우, URL이 `https` 프로토콜을 사용한다.

2. **서버의 위치(Where)**

   - 웹 클라이언트가 리소스가 어디에 호스팅 되어 있는지 알려준다.
   - 이 경우, `www.google.com` 에 리소스가 호스팅 되어 있다.

3. **리소스 경로(What)**
   - 서버에 존재하는 로컬 리소스들 중에서 요청받은 리소스가 무엇인지 알려준다.
   - 이 경우, 요청받은 리소스는 `imgs/seungmin.jpeg` 이다.

<br>

### 2.1.1 URL이 있기 전 암흑의 시대

- URL 이라는 일관된 방식이 없었기 때문에 훨씬 더 복잡해진다.
- URL은 브라우저가 더 영리하게 리소스에 접근하고 그것을 다루게 함으로써 **온라인 세성을 단순화시킨다.**

<br>

## 2.2 URL 문법

- 대부분의 URL은 일반 URL 문법을 따르며, 서로 다른 스킴도 형태와 문법 면에서 매우 유사하다.

```
<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```

<br>

### 2.2.1 스킴: 사용할 프로토콜

- 주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보
- 스킴 컴포넌트는 알파벳으로 시작해야 하고 `:` 문자로 구분한다.
- 대소문자를 가리지 않는다.

<br>

### 2.2.2 호스트와 포트

**호스트 컴포넌트**

- 접근하려고 하는 리소스를 가지고 있는 인터넷상의 호스트 장비
- 호스트 명이나 IP 주소를 제공한다.

**포트 컴포넌트**

- 서버가 열어놓은 네트워크 포트
- TCP 프로토콜을 사용하는 HTTP는 기본 포트로 80을 사용한다.

<br>

### 2.2.3 사용자 이름과 비밀번호

- 많은 서버가 자신이 가지고 있는 데이터에 접근을 허용하기 전에 사용자 이름과 비밀번호를 요구한다.
- ex. `ftp://joe:joepasswd@www.joes-hardware.com/sales_info.txt`
- 기본 사용자 이름 값: `anonymous`
- 기본 비밀번호 값: 브라우저마다 다르다.
- `@` 문자는 URL로부터 사용자 이름과 비밀번호 컴포넌트를 분리한다.

<br>

### 2.2.4 경로

- 리소스가 서버의 어디에 있는지 알려준다.
- `/` 문자를 기준으로 경로 조각으로 나뉜다.
- 각 경로조각은 자체만의 파라미터 컴포넌트를 가질 수 있다.

<br>

### 2.2.5 파라미터

- 리소스에 접근하기 위해선 위에 있는 정보만으로는 리소스를 찾지 못한다.
- URL이 사용하는 애플리케이션이 리소스에 접근하려면 프로토콜 파라미터가 필요하다.
- 파라미터 컴포넌트는 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용한다.
- `이름=값` 쌍의 리스트로 URL의 나머지 부분들로부터 `;` 문자로 구분하여 URL에 기술한다.
- ex. `ftp://prep.ai.mit.edu/pub/gnu;type=d`

<br>

### 2.2.6 질의 문자열

- 요청받을 리소스 형식의 범위를 좁히기 위해 질의 문자열을 사용한다.
- ex. `http://www.joes-hardware.com/inventory-check.cgi?item=12731`
- `?` 기호 우측에 있는 값들이 질의 문자열이다.
- 게이트웨이를 가리키는 URL의 경로 컴포넌트와 함께 전달하고 있다.
- 많은 게이트웨이가 `&`로 나뉜 `이름=값` 쌍 형식의 질의 문자열을 원한다.

<br>

### 2.2.7 프래그먼트

- 리소스 내의 조각을 가리킬 수 있다.
- ex. HTML 문서에 있는 특정 이미지나 일부분을 가리킬 수 있다.
- 클라이언트는 서버에 프레그먼트를 전달하지 않는다.
- 브라우저가 서버로부터 전체 리소스를 내려받은 후, 프래그먼트를 사용하여 리소스 일부를 보여준다.

<br>

## 2.3 단축 URL

- 웹 클라이언트는 몇몇 단축 URL을 인식하고 사용한다.
- 상대 URL은 리소스 안에 있는 리소스를 간결하게 기술하는데 사용할 수 있다.
- 많은 브라우저가 URL 확장 기능을 지원한다.

<br>

### 2.3.1 상대 URL

- URL은 상대 URL과 절대 URL로 나뉜다.
- 지금까지 우리가 본 URL들은 절대 URL이다.
- 절대 URL은 리소스가 접근하는데 필요한 모든 정보를 가지고 있다.
- 상대 URL은 모든 정보를 담고 있지는 않다.

**기저(base) URL**

- 상대 URL을 사용할 때 baseURL을 통해서 스킴과 다른 컴포넌트들을 알아낼 수 있기 때문에 모두 입력하지 않아도 된다.
- 상대 URL은 프래그먼트이거나 URL 일부다.

**기저(base) URL을 가져오는 방법**

1. 리소스에서 명시적으로 제공
2. 리소스를 포함하고 있는 base URL
3. 기저 URL이 없는 경우는 절대 URL로만 이루어져 있다는 뜻이다.

<br>

### 2.3.2 URL 확장

- 어떤 브라우저들은 URL을 입력한 다음이나 입력하고 있는 동안에 자동으로 URL을 확장한다.
- 호스트 명 확장: 크롬에서 주소 입력란에 `naver`를 입력하면 자동으로 `www.naver.com`을 만들어준다.
- 히스토리 확장: 과거에 사용자가 방문했던 URL의 기록을 저장해 놓았다가 과거 URL의 일부를 입력하면 자동으로 확장해준다.

<br>

## 2.4 안전하지 않은 문자

- 안전한 전송: 정보가 유실될 위험 없이 URL을 전송할 수 있다는 것
- 안전한 전송과 가독성을 위해 사용할 수 있는 알파벳과 URL 인코딩 규칙이 만들어졌다.

<br>

### 2.4.1 URL 문자 집합

- URL에 이스케이프 문자열을 쓸 수 있게 설계하였다.
- 이스케이프 문자열: US-ASCII에서 사용이 금지된 문자들
- 특정 문자나 데이터를 인코딩할 수 있게 함으로써 이동성과 완성도를 높였다.

<br>

### 2.4.2 인코딩 체계

- URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식이 고안되었다.
- 인코딩은 안전하지 않은 문자를 퍼센티지 기호(%)로 시작해,
- ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어진 이스케이프 문자로 바꾼다.

<br>

### 2.4.3 문자 제한

- 아래의 문자들은 URL 내에서 특별한 의미로 예약되어 있다.

```
%
/
.
..
#
?
;
:
$, +
@ & =
{}|\~[]`
<>"
```

<br>

## 2.5 스킴의 바다

- 웹에서 쓰이는 일반 스킴들의 포맷

**http**
: 일반 URL 포맷을 지키는 하이퍼텍스트 전송 프로토콜 스킴
: 기본 포트 - 80

**https**
: HTTP의 커넥션 양 끝단에서 암호화하기 위해 SSL을 사용한다.
: 기본 포트 - 443

**mailto**
: 이메일 주소를 가리키는 스킴
: 표준 URL과는 다른 포맷을 가진다.

**ftp**
: 파일 전송 프로토콜로 FTP 서버에 있는 파일을 다운받거나 업로드할 때 사용할 수 있다.

**rtsp, rtspu**
: 실시간 스트리밍 프로토콜

**file**
: 주어진 호스트 기기에서 바로 접근할 수 있는 파일들을 나타낸다.

**news**
: 특정 문서나 뉴스 그룹에 접근하는데 사용한다.

**telnet**
: 대화형 서비스에 접근하는데 사용한다.
